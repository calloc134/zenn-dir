---
title: "OAuth と OIDC の概要と目的の違い"
---

# OAuth と OIDC の概要と目的の違い

この章では、OAuth と OIDC がそれぞれ何を目的としているのか、その違いを明確にしていきます。

## OAuth とは

OAuth は、**リソースの所有者がリソースへのアクセス権を第三者に与える仕組み**です。

具体的な例で考えてみましょう。あなたが Google Photo に写真を保存しているとします。ここで、別の印刷サービスを使って写真を印刷したいと思いました。

このとき、印刷サービスにあなたの Google アカウントのパスワードを教えるわけにはいきません。代わりに、OAuth の仕組みを使うことで、「印刷サービスにだけ、特別に、自分の写真を見る権限を与える」ということが実現できます。

この「権限を与える」という行為を**認可（Authorization）**と呼びます。OAuth は認可のためのフレームワークなのです。

> OAuth 2.0 は, サードパーティーアプリケーションによる HTTP サービスへの限定的なアクセスを可能にする認可フレームワークである.
>
> — [RFC 6749](https://www.rfc-editor.org/rfc/rfc6749)

## OIDC とは

OIDC（OpenID Connect）は、**ユーザの本人確認（認証）とプロフィール情報の取得を行うための仕組み**です。

こちらも具体例で考えてみましょう。Zenn のようなサービスに新規登録するとき、「Google アカウントでログイン」というボタンを見たことがあるでしょう。

このとき、Zenn は Google に対して「このユーザは本当に Google アカウントを持っているか？」「このユーザはどんな人か？」を確認し、その情報を使ってログインを実現しています。

この「ユーザが誰であるかを確認する」という行為を**認証（Authentication）**と呼びます。OIDC は認証のためのプロトコルです。

> OpenID Connect 1.0 は, OAuth 2.0 プロトコルの上にシンプルなアイデンティティレイヤーを付与したものである.
>
> — [OpenID Connect Core 1.0](https://openid.net/specs/openid-connect-core-1_0.html)

## 目的の違い

OAuth と OIDC は、**目的が全く異なるユースケース**に対応しています。

| プロトコル | 目的                     | キーワード     |
| ---------- | ------------------------ | -------------- |
| OAuth      | リソースに対する**認可** | 権限を与える   |
| OIDC       | ユーザの**認証**         | 本人確認をする |

- **OAuth** → 「印刷サービスに、私の写真を見る権限を与えてよい」
- **OIDC** → 「このサービスに、私が Google ユーザであることを証明したい」

:::message alert
**OAuth を認証に転用してはいけない**

OAuth はあくまで認可の仕組みです。OAuth を直接認証に使う「OAuth 認証」と呼ばれる手法は、セキュリティ上の問題があり避けるべきです。認証が必要な場合は OIDC を使いましょう。

なぜ問題があるのかについては、後の章で詳しく解説します。
:::

## OIDC は OAuth の上に構築されている

技術的に見ると、OIDC は OAuth 2.0 の上に「追加レイヤー」として構築されています。

そのため、以下のような特徴があります：

1. **OIDC を理解するためには OAuth の理解が必要**

   - OIDC のフローは OAuth のフローをベースにしている
   - OAuth の用語や概念がそのまま使われる

2. **仕様の境界は曖昧なところもある**

   - OIDC で導入された仕様が OAuth 側に逆輸入されることもある
   - 例えば、OIDC で生まれた概念が OAuth 2.0 Security Best Current Practice に取り込まれるなど

3. **OIDC だからといってすべてが認証というわけではない**
   - OIDC の `/userinfo` エンドポイントは、アクセストークンを使ってプロフィール情報を取得する
   - これは技術的には「認可」の役割を持っている

このブックでは、まず OAuth についてしっかり理解し、その後 OIDC について解説していきます。OAuth の理解なくして OIDC は理解できません。

## まとめ

- **OAuth** はリソースへのアクセスを第三者に**認可**する仕組み
- **OIDC** はユーザの本人確認（**認証**）を行う仕組み
- 両者の目的は全く異なるが、OIDC は OAuth の上に構築されている
- OAuth を認証に転用する「OAuth 認証」は避け、認証には OIDC を使うべき

次の章からは、OAuth に必要な概念を順に解説していきます。
