---
title: "OAuthの登場人物"
free: true
---

## 概要

OAuth には 4 つの登場人物（ロール）が存在します。リソース認可に関連する人物をまず列挙してみましょう。

- リソースの持ち主
- リソースを管理している保管庫
- 保管庫へのアクセスを管理している認可局
- リソースにアクセスする第三者

OAuth では、これらの登場人物を以下のように定義しています。

| 役割                                   | 名称             |
| -------------------------------------- | ---------------- |
| リソースの持ち主                       | リソースオーナー |
| リソースを管理している保管庫           | リソースサーバ   |
| 保管庫へのアクセスを管理している認可局 | 認可サーバ       |
| リソースにアクセスする第三者           | クライアント     |

![](/images/04-oauth-actors/2025-12-01-21-42-32.png)

これらのロールは、OAuth 2.0 の仕様である RFC 6749 において定義されています。[^rfc6749-roles]

[^rfc6749-roles]: RFC 6749 Section 1.1 において、OAuth のロール（リソースオーナー、リソースサーバ、クライアント、認可サーバ）が定義されています。https://www.rfc-editor.org/rfc/rfc6749.html#section-1.1

ここでは、Google Photos を例に各登場人物を解説していきます。

## リソースオーナー（Resource Owner）

**リソースオーナー**は、リソースの持ち主です。

- リソースの持ち主、つまり Google Photos に画像を保存しているユーザ
- 認可サーバに「この第三者にリソースへのアクセスを許可します」と伝える主体

![](/images/04-oauth-actors/2025-12-01-21-44-37.png)

## リソースサーバ（Resource Server）

**リソースサーバ**は、リソースオーナーの持つリソースを管理している保管庫です。

- Google Photos で画像を保管しているサーバ
- アクセストークンを受け取り、それを検証し、成功すればリソースを返す

![](/images/04-oauth-actors/2025-12-01-21-46-44.png)

## 認可サーバ（Authorization Server）

**認可サーバ**は、保管庫へのアクセスを管理している認可局です。

- Google OAuth サーバ
- リソースサーバ へのアクセスを管理する
- リソースオーナーからの許可を得て、アクセストークンを発行する

![](/images/04-oauth-actors/2025-12-01-21-48-33.png)

:::message
リソースサーバと認可サーバは、同じサーバであることも多いです。[^rfc6749-as-rs]

[^rfc6749-as-rs]:
    RFC 6749 では「認可サーバーとリソースサーバー間のやりとりについては本仕様書の範囲外である. 認可サーバーはリソースサーバーと同一のサーバーでも異なるサーバーでもよい」と説明されています。https://www.rfc-editor.org/rfc/rfc6749.html#section-1.1
    :::

## クライアント（Client）

**クライアント**は、リソースにアクセスする第三者です。

- リソースにアクセスする第三者
- 印刷サービスなど、リソースオーナーに代わってリソースにアクセスするアプリケーション
- リソースオーナーから許可を得て、認可サーバからアクセストークンを取得し
  アクセストークンを用いてリソースサーバのリソースにアクセスする

![](/images/04-oauth-actors/2025-12-01-21-50-20.png)

## まとめ

以上、OAuth の 4 つの登場人物を解説しました。まとめると、以下のようになります。

| 役割                                   | 名称             | 役割の説明                                                                           |
| -------------------------------------- | ---------------- | ------------------------------------------------------------------------------------ |
| リソースの持ち主                       | リソースオーナー | リソースの持ち主。<br>リソースへのアクセスを許可する主体                             |
| リソースを管理している保管庫           | リソースサーバ   | リソースを管理している保管庫。<br>アクセストークンを検証し、<br>リソースを提供する   |
| 保管庫へのアクセスを管理している認可局 | 認可サーバ       | リソースサーバへのアクセスを管理する。<br>アクセストークンを発行する                 |
| リソースにアクセスする第三者           | クライアント     | リソースにアクセスする第三者。<br>アクセストークンを用いて<br>リソースにアクセスする |

## 余談：OAuth「クライアント」という名前について

「クライアント」という名前から、スマートフォンやブラウザで動作するアプリを想像するかもしれません。

しかし、OAuth における「クライアント」は、**OAuth フローにおける役割（ロール）** を指す言葉です。
そして、Web アプリケーションのサーバ・クライアントモデルにおけるクライアントとは異なる概念です。

つまり、OAuth クライアントがサーバサイドで動作することもあります。
むしろ、OAuth クライアントがサーバ上で動作するほうが、セキュリティ上望ましいケースが多いです。

![](/images/04-oauth-actors/2025-12-01-21-54-18.png)

### OAuth クライアントの種類

OAuth クライアントには、**Confidential Client** と **Public Client** の 2 種類があります。[^rfc6749-client-types]

| クライアントタイプ      | 説明                                             |
| ----------------------- | ------------------------------------------------ |
| **Confidential Client** | クレデンシャルの機密性を維持できるクライアント   |
| **Public Client**       | クレデンシャルの機密性を維持できないクライアント |

[^rfc6749-client-types]: RFC 6749 Section 2.1 において、クライアントタイプの分類（Confidential Client と Public Client）が定義されています。https://www.rfc-editor.org/rfc/rfc6749.html#section-2.1

詳細は後の章で解説しますが、本書ではまず **Confidential Client** を前提に解説を進めます。

とりあえずここからの解説では、Ruby on Rails のような昔ながらの MPA（Multi Page Application）を想定してください。
MPA であれば、ほとんどの場合で Confidential Client として動作します。

Public Client については、Confidential Client の理解が十分に進んでから、再度解説します。

![](/images/04-oauth-actors/2025-12-01-21-59-16.png)
